generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                      Int                 @id @default(autoincrement())
  email                   String              @db.VarChar(255) @unique
  firstName               String              @db.VarChar(255) @map("first_name")
  lastName                String?             @db.VarChar(255) @map("last_name")
  photo                   String?             @db.Text
  username                String              @db.VarChar(255) @unique
  refreshToken            String?             @db.Text @map("refresh_token")
  exercises               Exercise[]
  createdAt               DateTime            @default(now()) @map("created_at")
  updatedAt               DateTime            @updatedAt @map("updated_at")

  @@map("users")
}

model ExercisesType {
  id                      Int                 @id @default(autoincrement())
  name                    String              @db.VarChar(255) @unique
  exercises               Exercise[]
  createdAt               DateTime            @default(now()) @map("created_at")
  updatedAt               DateTime            @updatedAt @map("updated_at")

  @@map("exercises_types")
}

model Exercise {
  id                      Int                 @id @default(autoincrement())
  userId                  Int                 @map("user_id")
  user                    User                @relation(fields: [userId], references: [id])
  typeId                  Int                 @map("type_id")
  type                    ExercisesType       @relation(fields: [typeId], references: [id])
  exercise                Json
  createdAt               DateTime            @default(now()) @map("created_at")
  updatedAt               DateTime            @updatedAt @map("updated_at")

  @@map("exercises")
}
